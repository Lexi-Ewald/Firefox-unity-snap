Description: partially revert https://hg.mozilla.org/mozilla-central/rev/5b3ea42ac6bc
 to enable building with a released version of the WASI SDK (version 12 doesn't have
 wasi-emulated-process-clocks, https://github.com/WebAssembly/wasi-libc/commit/b9b64a6)
Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=1739128
Author: Olivier Tilloy <olivier.tilloy@canonical.com>

--- a/config/rules.mk
+++ b/config/rules.mk
@@ -495,7 +495,7 @@ $(LIBRARY): $(OBJS) $(STATIC_LIBS) $(EXT
 $(WASM_ARCHIVE): $(CWASMOBJS) $(CPPWASMOBJS) $(STATIC_LIBS) $(EXTRA_DEPS) $(GLOBAL_DEPS)
 	$(REPORT_BUILD_VERBOSE)
 	$(RM) $(WASM_ARCHIVE)
-	$(WASM_CXX) -o $@ -Wl,--export-all -Wl,--stack-first -Wl,-z,stack-size=$(if $(MOZ_OPTIMIZE),262144,1048576) -Wl,--no-entry -Wl,--growable-table $(CWASMOBJS) $(CPPWASMOBJS) -lwasi-emulated-process-clocks
+	$(WASM_CXX) -o $@ -Wl,--export-all -Wl,--stack-first -Wl,-z,stack-size=$(if $(MOZ_OPTIMIZE),262144,1048576) -Wl,--no-entry -Wl,--growable-table $(CWASMOBJS) $(CPPWASMOBJS)
 
 $(addsuffix .c,$(WASM_ARCHIVE)): $(WASM_ARCHIVE) $(DIST)/host/bin/wasm2c$(HOST_BIN_SUFFIX)
 	$(DIST)/host/bin/wasm2c$(HOST_BIN_SUFFIX) -o $@ $<
--- a/js/src/shell/moz.build
+++ b/js/src/shell/moz.build
@@ -57,4 +57,3 @@ OBJDIR_FILES.js.src += ["!/dist/bin/js%s
 # Also make the stack grow towards 0 so that if SpiderMonkey's stack limiter is buggy, overflow will likely trap.
 if CONFIG["OS_ARCH"] == "WASI":
     LDFLAGS += ["-Wl,-z,stack-size=1048576", "-Wl,--stack-first"]
-    OS_LIBS += ["wasi-emulated-process-clocks"]
